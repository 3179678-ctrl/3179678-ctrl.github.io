<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.1">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #4689cc; -webkit-text-stroke: #4689cc}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c27e65; -webkit-text-stroke: #c27e65}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #8cd3fe; -webkit-text-stroke: #8cd3fe}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c1c1c1; -webkit-text-stroke: #c1c1c1}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #c1c1c1; -webkit-text-stroke: #c1c1c1; min-height: 14.0px}
    p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cdad6a; -webkit-text-stroke: #cdad6a}
    p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #598a43; -webkit-text-stroke: #598a43}
    p.p9 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #42b3ff; -webkit-text-stroke: #42b3ff}
    p.p10 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #d4d69a; -webkit-text-stroke: #d4d69a}
    p.p11 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Menlo; color: #cacaca; -webkit-text-stroke: #cacaca; min-height: 14.0px}
    span.s1 {font-kerning: none; color: #6d6d6d; background-color: #181818; -webkit-text-stroke: 0px #6d6d6d}
    span.s2 {font-kerning: none; background-color: #181818}
    span.s3 {font-kerning: none; color: #c1c1c1; background-color: #181818; -webkit-text-stroke: 0px #c1c1c1}
    span.s4 {font-kerning: none; color: #8cd3fe; background-color: #181818; -webkit-text-stroke: 0px #8cd3fe}
    span.s5 {font-kerning: none; color: #4689cc; background-color: #181818; -webkit-text-stroke: 0px #4689cc}
    span.s6 {font-kerning: none; color: #c27e65; background-color: #181818; -webkit-text-stroke: 0px #c27e65}
    span.s7 {font-kerning: none; color: #cdad6a; background-color: #181818; -webkit-text-stroke: 0px #cdad6a}
    span.s8 {font-kerning: none}
    span.s9 {font-kerning: none; color: #a7c598; background-color: #181818; -webkit-text-stroke: 0px #a7c598}
    span.s10 {font-kerning: none; color: #cacaca; background-color: #181818; -webkit-text-stroke: 0px #cacaca}
    span.s11 {font-kerning: none; color: #d4d69a; background-color: #181818; -webkit-text-stroke: 0px #d4d69a}
    span.s12 {font-kerning: none; color: #598a43; background-color: #181818; -webkit-text-stroke: 0px #598a43}
    span.s13 {font-kerning: none; color: #b76fb3; background-color: #181818; -webkit-text-stroke: 0px #b76fb3}
    span.s14 {font-kerning: none; color: #42b3ff; background-color: #181818; -webkit-text-stroke: 0px #42b3ff}
    span.s15 {font-kerning: none; color: #43c0a0; background-color: #181818; -webkit-text-stroke: 0px #43c0a0}
  </style>
</head>
<body>
<p class="p1"><span class="s1">&lt;!</span><span class="s2">DOCTYPE</span><span class="s3"> </span><span class="s4">html</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s1">&lt;</span><span class="s5">html</span><span class="s3"> </span><span class="s4">lang</span><span class="s3">=</span><span class="s2">"zh-CN"</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">head</span><span class="s1">&gt;</span></p>
<p class="p3"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s5">meta</span><span class="s3"> </span><span class="s2">charset</span><span class="s3">=</span><span class="s6">"UTF-8"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s5">meta</span><span class="s3"> </span><span class="s4">name</span><span class="s3">=</span><span class="s2">"viewport"</span><span class="s3"> </span><span class="s4">content</span><span class="s3">=</span><span class="s2">"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s5">title</span><span class="s1">&gt;</span><span class="s2">打窝船控制器（带距离和电量）</span><span class="s1">&lt;/</span><span class="s5">title</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s5">link</span><span class="s3"> </span><span class="s4">rel</span><span class="s3">=</span><span class="s2">"stylesheet"</span><span class="s3"> </span><span class="s4">href</span><span class="s3">=</span><span class="s2">"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s2">style</span><span class="s1">&gt;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">:root</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--primary</span><span class="s2">: </span><span class="s6">#3b82f6</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--primary-dark</span><span class="s2">: </span><span class="s6">#2563eb</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--secondary</span><span class="s2">: </span><span class="s6">#f97316</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--success</span><span class="s2">: </span><span class="s6">#10b981</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--danger</span><span class="s2">: </span><span class="s6">#ef4444</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--dark</span><span class="s2">: </span><span class="s6">#1e293b</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--light</span><span class="s2">: </span><span class="s6">#f8fafc</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">--gray</span><span class="s2">: </span><span class="s6">#64748b</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s5">*</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin</span><span class="s2">: </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">box-sizing</span><span class="s2">: </span><span class="s6">border-box</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s4">font-family</span><span class="s10">: </span><span class="s2">'Segoe UI'</span><span class="s10">, </span><span class="s2">sans-serif</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">body</span><span class="s2"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s6">#f1f5f9</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">min-height</span><span class="s2">: </span><span class="s9">100vh</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">justify-content</span><span class="s10">: </span><span class="s6">center</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">align-items</span><span class="s2">: </span><span class="s6">flex-start</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.container</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">100%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">max-width</span><span class="s2">: </span><span class="s9">480px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">background</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">16px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">box-shadow</span><span class="s2">: </span><span class="s9">0</span><span class="s2"> </span><span class="s9">4px</span><span class="s2"> </span><span class="s9">6px</span><span class="s2"> </span><span class="s11">rgba</span><span class="s2">(</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0.1</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">position</span><span class="s2">: </span><span class="s6">relative</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.container::before</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">content</span><span class="s2">: </span><span class="s6">''</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">position</span><span class="s2">: </span><span class="s6">absolute</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">top</span><span class="s2">: </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">left</span><span class="s2">: </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">right</span><span class="s2">: </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">height</span><span class="s2">: </span><span class="s9">5px</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background</span><span class="s10">: </span><span class="s11">linear-gradient</span><span class="s10">(</span><span class="s9">90deg</span><span class="s10">, </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--primary</span><span class="s10">), </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--secondary</span><span class="s10">));</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">16px</span><span class="s2"> </span><span class="s9">16px</span><span class="s2"> </span><span class="s9">0</span><span class="s2"> </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">h1</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--dark</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">text-align</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin</span><span class="s2">: </span><span class="s9">0</span><span class="s2"> </span><span class="s9">0</span><span class="s2"> </span><span class="s9">20px</span><span class="s2"> </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding-top</span><span class="s2">: </span><span class="s9">10px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">22px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.connection-panel</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s6">#f8fafc</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-bottom</span><span class="s2">: </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.form-row</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">10px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-bottom</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.form-control</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">flex</span><span class="s2">: </span><span class="s9">1</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2"> </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border</span><span class="s2">: </span><span class="s9">1px</span><span class="s2"> </span><span class="s6">solid</span><span class="s2"> </span><span class="s6">#cbd5e1</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">min-height</span><span class="s2">: </span><span class="s9">48px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.btn</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2"> </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">16px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-weight</span><span class="s2">: </span><span class="s9">600</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border</span><span class="s2">: </span><span class="s6">none</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">cursor</span><span class="s2">: </span><span class="s6">pointer</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">min-height</span><span class="s2">: </span><span class="s9">48px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">align-items</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">justify-content</span><span class="s10">: </span><span class="s6">center</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.btn-primary</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--primary</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">100%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">/* 状态面板扩大为3行2列，容纳距离和电量 */</span></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.status-panel</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">grid</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">grid-template-columns</span><span class="s10">: </span><span class="s11">repeat</span><span class="s10">(</span><span class="s9">2</span><span class="s10">, </span><span class="s9">1fr</span><span class="s10">); </span><span class="s12">/* 固定2列布局 */</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-bottom</span><span class="s2">: </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.status-card</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s6">#f8fafc</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.status-label</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">14px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--gray</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-bottom</span><span class="s2">: </span><span class="s9">5px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.status-value</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-weight</span><span class="s2">: </span><span class="s9">600</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">align-items</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.status-connected</span><span class="s2"> { </span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--success</span><span class="s2">); }</span></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.status-disconnected</span><span class="s10"> { </span><span class="s4">color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s4">--danger</span><span class="s10">); }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.status-pending</span><span class="s2"> { </span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--secondary</span><span class="s2">); }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.battery-high</span><span class="s2"> { </span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--success</span><span class="s2">); }<span class="Apple-converted-space">    </span></span><span class="s12">/* 高电量 */</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.battery-medium</span><span class="s2"> { </span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--secondary</span><span class="s2">); } </span><span class="s12">/* 中等电量 */</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.battery-low</span><span class="s2"> { </span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--danger</span><span class="s2">); } <span class="Apple-converted-space">      </span></span><span class="s12">/* 低电量 */</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.gear-controls</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">10px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-bottom</span><span class="s2">: </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.gear-btn</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">flex</span><span class="s2">: </span><span class="s9">1</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2"> </span><span class="s9">5px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border</span><span class="s2">: </span><span class="s9">2px</span><span class="s2"> </span><span class="s6">solid</span><span class="s2"> </span><span class="s6">#e2e8f0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">background</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--gray</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">cursor</span><span class="s2">: </span><span class="s6">pointer</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">min-height</span><span class="s2">: </span><span class="s9">48px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.gear-btn.active</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">border-color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--primary</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">background</span><span class="s2">: </span><span class="s11">rgba</span><span class="s2">(</span><span class="s9">59</span><span class="s2">,</span><span class="s9">130</span><span class="s2">,</span><span class="s9">246</span><span class="s2">,</span><span class="s9">0.1</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--primary</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.joystick-container</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">280px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">height</span><span class="s2">: </span><span class="s9">280px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin</span><span class="s2">: </span><span class="s9">0</span><span class="s2"> </span><span class="s6">auto</span><span class="s2"> </span><span class="s9">20px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">position</span><span class="s2">: </span><span class="s6">relative</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s6">#f8fafc</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">box-shadow</span><span class="s2">: </span><span class="s6">inset</span><span class="s2"> </span><span class="s9">0</span><span class="s2"> </span><span class="s9">0</span><span class="s2"> </span><span class="s9">10px</span><span class="s2"> </span><span class="s11">rgba</span><span class="s2">(</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0.05</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">background-image</span><span class="s2">: </span><span class="s11">radial-gradient</span><span class="s2">(</span><span class="s6">circle</span><span class="s2">, </span><span class="s11">rgba</span><span class="s2">(</span><span class="s9">59</span><span class="s2">,</span><span class="s9">130</span><span class="s2">,</span><span class="s9">246</span><span class="s2">,</span><span class="s9">0.05</span><span class="s2">) </span><span class="s9">55%</span><span class="s2">, </span><span class="s6">transparent</span><span class="s2"> </span><span class="s9">55%</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.joystick-knob</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">90px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">height</span><span class="s2">: </span><span class="s9">90px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">position</span><span class="s2">: </span><span class="s6">absolute</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">top</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">left</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">transform</span><span class="s2">: </span><span class="s11">translate</span><span class="s2">(</span><span class="s9">-50%</span><span class="s2">, </span><span class="s9">-50%</span><span class="s2">);</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--primary</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">box-shadow</span><span class="s2">: </span><span class="s9">0</span><span class="s2"> </span><span class="s9">4px</span><span class="s2"> </span><span class="s9">8px</span><span class="s2"> </span><span class="s11">rgba</span><span class="s2">(</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0</span><span class="s2">,</span><span class="s9">0.15</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">cursor</span><span class="s2">: </span><span class="s6">grab</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">touch-action</span><span class="s2">: </span><span class="s6">none</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">align-items</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">justify-content</span><span class="s10">: </span><span class="s6">center</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">18px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-weight</span><span class="s2">: </span><span class="s6">bold</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.joystick-label</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">position</span><span class="s2">: </span><span class="s6">absolute</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--gray</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">14px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.label-front</span><span class="s2"> { </span><span class="s4">top</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">; </span><span class="s4">left</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">; </span><span class="s4">transform</span><span class="s2">: </span><span class="s11">translateX</span><span class="s2">(</span><span class="s9">-50%</span><span class="s2">); }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.label-back</span><span class="s2"> { </span><span class="s4">bottom</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">; </span><span class="s4">left</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">; </span><span class="s4">transform</span><span class="s2">: </span><span class="s11">translateX</span><span class="s2">(</span><span class="s9">-50%</span><span class="s2">); }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.label-left</span><span class="s2"> { </span><span class="s4">left</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">; </span><span class="s4">top</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">; </span><span class="s4">transform</span><span class="s2">: </span><span class="s11">translateY</span><span class="s2">(</span><span class="s9">-50%</span><span class="s2">); }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.label-right</span><span class="s2"> { </span><span class="s4">right</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">; </span><span class="s4">top</span><span class="s2">: </span><span class="s9">50%</span><span class="s2">; </span><span class="s4">transform</span><span class="s2">: </span><span class="s11">translateY</span><span class="s2">(</span><span class="s9">-50%</span><span class="s2">); }</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.bait-controls</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">10px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.bait-btn</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">flex</span><span class="s2">: </span><span class="s9">1</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2"> </span><span class="s9">5px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border</span><span class="s2">: </span><span class="s6">none</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">cursor</span><span class="s2">: </span><span class="s6">pointer</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">min-height</span><span class="s2">: </span><span class="s9">48px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">display</span><span class="s2">: </span><span class="s6">flex</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">align-items</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">justify-content</span><span class="s10">: </span><span class="s6">center</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">gap</span><span class="s2">: </span><span class="s9">8px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.bait-release</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--secondary</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.bait-reset</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s11">var</span><span class="s10">(</span><span class="s2">--gray</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s6">white</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.history-panel</span><span class="s10"> {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">background-color</span><span class="s10">: </span><span class="s6">#f8fafc</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-radius</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">12px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-top</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">#command-history</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">max-height</span><span class="s2">: </span><span class="s9">100px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">overflow-y</span><span class="s2">: </span><span class="s6">auto</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">14px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s2">.history-item</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">padding</span><span class="s2">: </span><span class="s9">5px</span><span class="s2"> </span><span class="s9">0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">border-bottom</span><span class="s2">: </span><span class="s9">1px</span><span class="s2"> </span><span class="s6">solid</span><span class="s2"> </span><span class="s6">#e2e8f0</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.pulse</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">animation</span><span class="s2">: pulse </span><span class="s9">2s</span><span class="s2"> </span><span class="s6">infinite</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s13">@keyframes</span><span class="s2"> </span><span class="s4">pulse</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>0% { </span><span class="s4">opacity</span><span class="s2">: </span><span class="s9">1</span><span class="s2">; }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>50% { </span><span class="s4">opacity</span><span class="s2">: </span><span class="s9">0.6</span><span class="s2">; }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>100% { </span><span class="s4">opacity</span><span class="s2">: </span><span class="s9">1</span><span class="s2">; }</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s7">.footer</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">text-align</span><span class="s2">: </span><span class="s6">center</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">margin-top</span><span class="s2">: </span><span class="s9">15px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">font-size</span><span class="s2">: </span><span class="s9">13px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">color</span><span class="s2">: </span><span class="s11">var</span><span class="s2">(</span><span class="s4">--gray</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s13">@media</span><span class="s2"> (</span><span class="s4">max-width</span><span class="s2">: </span><span class="s9">320px</span><span class="s2">) {</span></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">.joystick-container</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">240px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">height</span><span class="s2">: </span><span class="s9">240px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p7"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">.joystick-knob</span><span class="s10"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">width</span><span class="s2">: </span><span class="s9">80px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">height</span><span class="s2">: </span><span class="s9">80px</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;/</span><span class="s2">style</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">head</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;</span><span class="s2">body</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"container"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">h1</span><span class="s1">&gt;&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-ship"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 打窝船控制器</span><span class="s1">&lt;/</span><span class="s5">h1</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"connection-panel"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"connection-title"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-plug"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 服务器设置</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"form-row"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">input</span><span class="s3"> </span><span class="s4">type</span><span class="s3">=</span><span class="s2">"text"</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"form-control"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"server-ip"</span><span class="s3"> </span><span class="s4">placeholder</span><span class="s3">=</span><span class="s2">"服务器IP"</span><span class="s3"> </span><span class="s4">value</span><span class="s3">=</span><span class="s2">"127.0.0.1"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">input</span><span class="s3"> </span><span class="s4">type</span><span class="s3">=</span><span class="s2">"number"</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"form-control"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"server-port"</span><span class="s3"> </span><span class="s4">placeholder</span><span class="s3">=</span><span class="s2">"端口"</span><span class="s3"> </span><span class="s4">value</span><span class="s3">=</span><span class="s2">"8765"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"btn btn-primary"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"connect-btn"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-link"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 连接服务器</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s2">&lt;!-- 状态面板新增距离和电量显示 --&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"status-panel"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">服务器连接</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"fas fa-server status-disconnected"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"server-status-icon"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"server-status"</span><span class="s1">&gt;</span><span class="s2">未连接</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">车辆连接</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"fas fa-car status-pending"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"car-status-icon"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"car-status"</span><span class="s1">&gt;</span><span class="s2">等待连接</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">当前档位</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"fas fa-tachometer-alt"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"current-gear"</span><span class="s1">&gt;</span><span class="s2">2（中档）</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">最后指令</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-history"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"last-command"</span><span class="s1">&gt;</span><span class="s2">无</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s2">&lt;!-- 新增：距离显示 --&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">距离（米）</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-ruler"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"distance"</span><span class="s1">&gt;</span><span class="s2">--</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p8"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s2">&lt;!-- 新增：电池电量显示 --&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-card"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-label"</span><span class="s1">&gt;</span><span class="s2">电池电量</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"status-value"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"fas fa-battery-full"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"battery-icon"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">span</span><span class="s2"> </span><span class="s4">id</span><span class="s2">=</span><span class="s6">"battery"</span><span class="s1">&gt;</span><span class="s2">--</span><span class="s1">&lt;/</span><span class="s5">span</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"control-section"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"section-title"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-cog"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 档位控制</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"gear-controls"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"gear-btn"</span><span class="s2"> </span><span class="s4">data-gear</span><span class="s2">=</span><span class="s6">"1"</span><span class="s1">&gt;</span><span class="s2">1档（慢）</span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"gear-btn active"</span><span class="s2"> </span><span class="s4">data-gear</span><span class="s2">=</span><span class="s6">"2"</span><span class="s1">&gt;</span><span class="s2">2档（中）</span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"gear-btn"</span><span class="s2"> </span><span class="s4">data-gear</span><span class="s2">=</span><span class="s6">"3"</span><span class="s1">&gt;</span><span class="s2">3档（快）</span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"control-section"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"section-title"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-compass"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 方向控制</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-container"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"joystick-container"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-knob"</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"joystick"</span><span class="s1">&gt;</span><span class="s3">控</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-label label-front"</span><span class="s1">&gt;</span><span class="s3">前</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-label label-back"</span><span class="s1">&gt;</span><span class="s3">后</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-label label-left"</span><span class="s1">&gt;</span><span class="s3">左</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"joystick-label label-right"</span><span class="s1">&gt;</span><span class="s3">右</span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"control-section"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"section-title"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-fish"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 投饵控制</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"bait-controls"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"bait-btn bait-release"</span><span class="s3"> </span><span class="s4">data-cmd</span><span class="s3">=</span><span class="s2">"D"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-box-open"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 投饵</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">button</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"bait-btn bait-reset"</span><span class="s3"> </span><span class="s4">data-cmd</span><span class="s3">=</span><span class="s2">"RST"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-redo"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 重置</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;/</span><span class="s5">button</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"history-panel"</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">class</span><span class="s3">=</span><span class="s2">"section-title"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">&lt;</span><span class="s5">i</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"fas fa-list"</span><span class="s1">&gt;&lt;/</span><span class="s5">i</span><span class="s1">&gt;</span><span class="s2"> 指令历史</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s3"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s3"> </span><span class="s4">id</span><span class="s3">=</span><span class="s2">"command-history"</span><span class="s1">&gt;&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;</span><span class="s5">div</span><span class="s2"> </span><span class="s4">class</span><span class="s2">=</span><span class="s6">"footer"</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s1">&lt;</span><span class="s5">p</span><span class="s1">&gt;</span><span class="s2">支持距离和电量显示</span><span class="s1">&lt;/</span><span class="s5">p</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p4"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;/</span><span class="s5">div</span><span class="s1">&gt;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p1"><span class="s3"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;</span><span class="s2">script</span><span class="s1">&gt;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">        </span></span><span class="s4">document</span><span class="s10">.</span><span class="s11">addEventListener</span><span class="s10">(</span><span class="s2">'DOMContentLoaded'</span><span class="s10">, </span><span class="s5">function</span><span class="s10">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 全局变量</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">ws</span><span class="s2"> = </span><span class="s5">null</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">serverIP</span><span class="s2"> = </span><span class="s6">'127.0.0.1'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">serverPort</span><span class="s2"> = </span><span class="s9">8765</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">isConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">currentGear</span><span class="s2"> = </span><span class="s9">2</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">lastSentCmd</span><span class="s2"> = </span><span class="s5">null</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">joystickDeadzone</span><span class="s2"> = </span><span class="s9">0.55</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">directionThreshold</span><span class="s10"> = </span><span class="s9">0.6</span><span class="s10">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">// DOM元素（新增距离和电量）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">connectBtn</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'connect-btn'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">serverIpInput</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'server-ip'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">serverPortInput</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'server-port'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">serverStatusEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'server-status'</span><span class="s2">);</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s14">serverStatusIconEl</span><span class="s10"> = </span><span class="s4">document</span><span class="s10">.</span><span class="s11">getElementById</span><span class="s10">(</span><span class="s2">'server-status-icon'</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">carStatusEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'car-status'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">carStatusIconEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'car-status-icon'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">currentGearEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'current-gear'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">lastCommandEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'last-command'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">commandHistoryEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'command-history'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">gearBtns</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">querySelectorAll</span><span class="s2">(</span><span class="s6">'.gear-btn'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">baitBtns</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">querySelectorAll</span><span class="s2">(</span><span class="s6">'.bait-btn'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">joystick</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'joystick'</span><span class="s2">);</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s14">joystickContainer</span><span class="s10"> = </span><span class="s4">document</span><span class="s10">.</span><span class="s11">getElementById</span><span class="s10">(</span><span class="s2">'joystick-container'</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 新增元素</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">distanceEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'distance'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">batteryEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'battery'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">batteryIconEl</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">getElementById</span><span class="s2">(</span><span class="s6">'battery-icon'</span><span class="s2">);</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 摇杆配置</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">containerRect</span><span class="s10"> = </span><span class="s2">joystickContainer</span><span class="s10">.</span><span class="s11">getBoundingClientRect</span><span class="s10">();</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">containerCenter</span><span class="s10"> = { </span><span class="s4">x:</span><span class="s10"> </span><span class="s2">containerRect</span><span class="s10">.</span><span class="s4">width</span><span class="s10"> / </span><span class="s9">2</span><span class="s10">, </span><span class="s4">y:</span><span class="s10"> </span><span class="s2">containerRect</span><span class="s10">.</span><span class="s4">height</span><span class="s10"> / </span><span class="s9">2</span><span class="s10"> };</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">maxKnobDistance</span><span class="s10"> = </span><span class="s2">containerCenter</span><span class="s10">.</span><span class="s4">x</span><span class="s10"> - (</span><span class="s2">joystick</span><span class="s10">.</span><span class="s4">offsetWidth</span><span class="s10"> / </span><span class="s9">2</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">// 辅助函数：添加历史记录</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s4">text</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">timeStr</span><span class="s2"> = </span><span class="s5">new</span><span class="s2"> </span><span class="s15">Date</span><span class="s2">().</span><span class="s11">toTimeString</span><span class="s2">().</span><span class="s11">slice</span><span class="s2">(</span><span class="s9">0</span><span class="s2">, </span><span class="s9">8</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">item</span><span class="s2"> = </span><span class="s4">document</span><span class="s2">.</span><span class="s11">createElement</span><span class="s2">(</span><span class="s6">'div'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">item</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'history-item'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">item</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">`[</span><span class="s5">${</span><span class="s14">timeStr</span><span class="s5">}</span><span class="s6">] </span><span class="s5">${</span><span class="s4">text</span><span class="s5">}</span><span class="s6">`</span><span class="s2">;</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s2">commandHistoryEl</span><span class="s10">.</span><span class="s11">prepend</span><span class="s10">(</span><span class="s2">item</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">commandHistoryEl</span><span class="s2">.</span><span class="s4">children</span><span class="s2">.</span><span class="s4">length</span><span class="s2"> &gt; </span><span class="s9">10</span><span class="s2">) {</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s2">commandHistoryEl</span><span class="s10">.</span><span class="s11">removeChild</span><span class="s10">(</span><span class="s2">commandHistoryEl</span><span class="s10">.</span><span class="s4">lastChild</span><span class="s10">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 更新状态显示</span></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s10"> </span><span class="s2">updateServerStatus</span><span class="s10">(</span><span class="s4">connected</span><span class="s10">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">connected</span><span class="s2">) {</span></p>
<p class="p3"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusEl</span><span class="s10">.</span><span class="s2">textContent</span><span class="s10"> = </span><span class="s6">`已连接 (</span><span class="s5">${</span><span class="s2">serverIP</span><span class="s5">}</span><span class="s6">:</span><span class="s5">${</span><span class="s2">serverPort</span><span class="s5">}</span><span class="s6">)`</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'status-connected'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-server status-connected pulse'</span><span class="s10">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">connectBtn</span><span class="s10">.</span><span class="s4">innerHTML</span><span class="s10"> = </span><span class="s2">'&lt;i class="fas fa-unlink"&gt;&lt;/i&gt; 断开连接'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">else</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">'未连接'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'status-disconnected'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">serverStatusIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-server status-disconnected'</span><span class="s10">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">connectBtn</span><span class="s10">.</span><span class="s4">innerHTML</span><span class="s10"> = </span><span class="s2">'&lt;i class="fas fa-link"&gt;&lt;/i&gt; 连接服务器'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s4">connected</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">connected</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">'已连接'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'status-connected'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-car status-connected'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">else</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">'等待连接'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'status-pending'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">carStatusIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-car status-pending'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 新增：更新距离显示</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">updateDistance</span><span class="s2">(</span><span class="s4">distance</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">distanceEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s4">distance</span><span class="s2">.</span><span class="s11">toFixed</span><span class="s2">(</span><span class="s9">1</span><span class="s2">); </span><span class="s12">// 保留1位小数</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`距离更新: </span><span class="s5">${</span><span class="s4">distance</span><span class="s2">.</span><span class="s11">toFixed</span><span class="s2">(</span><span class="s9">1</span><span class="s2">)</span><span class="s5">}</span><span class="s6">米`</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">// 新增：更新电池电量（带颜色和图标变化）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">updateBattery</span><span class="s2">(</span><span class="s4">percent</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">`</span><span class="s5">${</span><span class="s4">percent</span><span class="s5">}</span><span class="s6">%`</span><span class="s2">;</span></p>
<p class="p11"><span class="s2"><span class="Apple-converted-space">                </span></span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s12">// 根据电量设置颜色和图标</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">percent</span><span class="s2"> &gt;= </span><span class="s9">70</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'battery-high'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-battery-full battery-high'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s4">percent</span><span class="s2"> &gt;= </span><span class="s9">30</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'battery-medium'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-battery-three-quarters battery-medium'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">else</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">'battery-low'</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">'fas fa-battery-low battery-low'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`警告：电量低（</span><span class="s5">${</span><span class="s4">percent</span><span class="s5">}</span><span class="s6">%）`</span><span class="s2">); </span><span class="s12">// 低电量警告</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s10"> </span><span class="s2">updateLastCommand</span><span class="s10">(</span><span class="s4">cmd</span><span class="s10">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">cmdMap</span><span class="s2"> = {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s6">'S'</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'停止'</span><span class="s2">, </span><span class="s6">'F'</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'前进'</span><span class="s2">, </span><span class="s6">'B'</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'后退'</span><span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s2">'L'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'左转'</span><span class="s10">, </span><span class="s2">'R'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'右转'</span><span class="s10">, </span><span class="s2">'D'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'投饵'</span><span class="s10">, </span><span class="s2">'RST'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'投饵重置'</span><span class="s10">,</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s2">'1'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'1档（慢）'</span><span class="s10">, </span><span class="s2">'2'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'2档（中）'</span><span class="s10">, </span><span class="s2">'3'</span><span class="s4">:</span><span class="s10"> </span><span class="s2">'3档（快）'</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">lastCommandEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s14">cmdMap</span><span class="s2">[</span><span class="s4">cmd</span><span class="s2">] || </span><span class="s4">cmd</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s10"> </span><span class="s2">updateGearDisplay</span><span class="s10">(</span><span class="s4">gear</span><span class="s10">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">gearNames</span><span class="s2"> = {</span><span class="s9">1</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'1档（慢）'</span><span class="s2">, </span><span class="s9">2</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'2档（中）'</span><span class="s2">, </span><span class="s9">3</span><span class="s4">:</span><span class="s2"> </span><span class="s6">'3档（快）'</span><span class="s2">};</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">currentGearEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s14">gearNames</span><span class="s2">[</span><span class="s4">gear</span><span class="s2">];</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">gearBtns</span><span class="s2">.</span><span class="s11">forEach</span><span class="s2">(</span><span class="s4">btn</span><span class="s2"> </span><span class="s5">=&gt;</span><span class="s2"> </span><span class="s4">btn</span><span class="s2">.</span><span class="s4">classList</span><span class="s2">.</span><span class="s11">toggle</span><span class="s2">(</span><span class="s6">'active'</span><span class="s2">, </span><span class="s4">btn</span><span class="s2">.</span><span class="s4">dataset</span><span class="s2">.</span><span class="s4">gear</span><span class="s2"> == </span><span class="s4">gear</span><span class="s2">));</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 摇杆复位</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">resetJoystick</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) </span><span class="s13">return</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s14">joystick</span><span class="s10">.</span><span class="s4">style</span><span class="s10">.</span><span class="s4">transform</span><span class="s10"> = </span><span class="s2">'translate(-50%, -50%)'</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">lastSentCmd</span><span class="s2"> !== </span><span class="s6">'S'</span><span class="s2">) </span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s6">'S'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 摇杆移动逻辑</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">handleJoystickMove</span><span class="s2">(</span><span class="s4">clientX</span><span class="s2">, </span><span class="s4">clientY</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (!</span><span class="s4">isDragging</span><span class="s2">) </span><span class="s13">return</span><span class="s2">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">rect</span><span class="s2"> = </span><span class="s14">joystickContainer</span><span class="s2">.</span><span class="s11">getBoundingClientRect</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">centerX</span><span class="s2"> = </span><span class="s14">rect</span><span class="s2">.</span><span class="s4">left</span><span class="s2"> + (</span><span class="s14">rect</span><span class="s2">.</span><span class="s4">width</span><span class="s2"> / </span><span class="s9">2</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">centerY</span><span class="s2"> = </span><span class="s14">rect</span><span class="s2">.</span><span class="s4">top</span><span class="s2"> + (</span><span class="s14">rect</span><span class="s2">.</span><span class="s4">height</span><span class="s2"> / </span><span class="s9">2</span><span class="s2">);</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">deltaX</span><span class="s2"> = </span><span class="s4">clientX</span><span class="s2"> - </span><span class="s14">centerX</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">deltaY</span><span class="s2"> = </span><span class="s4">clientY</span><span class="s2"> - </span><span class="s14">centerY</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">distance</span><span class="s2"> = </span><span class="s4">Math</span><span class="s2">.</span><span class="s11">sqrt</span><span class="s2">(</span><span class="s14">deltaX</span><span class="s2"> * </span><span class="s14">deltaX</span><span class="s2"> + </span><span class="s14">deltaY</span><span class="s2"> * </span><span class="s14">deltaY</span><span class="s2">);</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">distance</span><span class="s2"> &gt; </span><span class="s14">maxKnobDistance</span><span class="s2">) {</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                    </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">scale</span><span class="s10"> = </span><span class="s2">maxKnobDistance</span><span class="s10"> / </span><span class="s2">distance</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">deltaX</span><span class="s2"> *= </span><span class="s14">scale</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">deltaY</span><span class="s2"> *= </span><span class="s14">scale</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s14">joystick</span><span class="s10">.</span><span class="s4">style</span><span class="s10">.</span><span class="s4">transform</span><span class="s10"> = </span><span class="s2">`translate(calc(-50% + </span><span class="s5">${</span><span class="s14">deltaX</span><span class="s5">}</span><span class="s2">px), calc(-50% + </span><span class="s5">${</span><span class="s14">deltaY</span><span class="s5">}</span><span class="s2">px))`</span><span class="s10">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s10"> (</span><span class="s2">distance</span><span class="s10"> &lt; </span><span class="s2">joystickDeadzone</span><span class="s10"> * </span><span class="s2">maxKnobDistance</span><span class="s10">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s6">'S'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">return</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">normalizedX</span><span class="s10"> = </span><span class="s2">deltaX</span><span class="s10"> / </span><span class="s2">maxKnobDistance</span><span class="s10">;</span></p>
<p class="p9"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s10"> </span><span class="s2">normalizedY</span><span class="s10"> = </span><span class="s2">deltaY</span><span class="s10"> / </span><span class="s2">maxKnobDistance</span><span class="s10">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">let</span><span class="s2"> </span><span class="s4">cmd</span><span class="s2"> = </span><span class="s6">'S'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">Math</span><span class="s2">.</span><span class="s11">abs</span><span class="s2">(</span><span class="s14">normalizedY</span><span class="s2">) &gt; </span><span class="s4">Math</span><span class="s2">.</span><span class="s11">abs</span><span class="s2">(</span><span class="s14">normalizedX</span><span class="s2">)) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">normalizedY</span><span class="s2"> &lt; -</span><span class="s14">directionThreshold</span><span class="s2">) </span><span class="s4">cmd</span><span class="s2"> = </span><span class="s6">'F'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s14">normalizedY</span><span class="s2"> &gt; </span><span class="s14">directionThreshold</span><span class="s2">) </span><span class="s4">cmd</span><span class="s2"> = </span><span class="s6">'B'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">else</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">normalizedX</span><span class="s2"> &lt; -</span><span class="s14">directionThreshold</span><span class="s2">) </span><span class="s4">cmd</span><span class="s2"> = </span><span class="s6">'L'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s14">normalizedX</span><span class="s2"> &gt; </span><span class="s14">directionThreshold</span><span class="s2">) </span><span class="s4">cmd</span><span class="s2"> = </span><span class="s6">'R'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s4">cmd</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s2">// WebSocket连接（新增距离和电量消息处理）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">connect</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">ws</span><span class="s2"> &amp;&amp; </span><span class="s4">ws</span><span class="s2">.</span><span class="s4">readyState</span><span class="s2"> !== </span><span class="s15">WebSocket</span><span class="s2">.</span><span class="s4">CLOSED</span><span class="s2">) </span><span class="s4">ws</span><span class="s2">.</span><span class="s11">close</span><span class="s2">();</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">serverIP</span><span class="s2"> = </span><span class="s14">serverIpInput</span><span class="s2">.</span><span class="s4">value</span><span class="s2">.</span><span class="s11">trim</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">serverPort</span><span class="s2"> = </span><span class="s11">parseInt</span><span class="s2">(</span><span class="s14">serverPortInput</span><span class="s2">.</span><span class="s4">value</span><span class="s2">) || </span><span class="s9">8765</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">wsUrl</span><span class="s2"> = </span><span class="s6">`ws://</span><span class="s5">${</span><span class="s4">serverIP</span><span class="s5">}</span><span class="s6">:</span><span class="s5">${</span><span class="s4">serverPort</span><span class="s5">}</span><span class="s6">`</span><span class="s2">;</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">ws</span><span class="s2"> = </span><span class="s5">new</span><span class="s2"> </span><span class="s15">WebSocket</span><span class="s2">(</span><span class="s14">wsUrl</span><span class="s2">);</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">ws</span><span class="s2">.</span><span class="s11">onopen</span><span class="s2"> = </span><span class="s5">function</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">isConnected</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">updateServerStatus</span><span class="s2">(</span><span class="s5">true</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`已连接服务器: </span><span class="s5">${</span><span class="s14">wsUrl</span><span class="s5">}</span><span class="s6">`</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s6">'AM_GXG'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p8"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s2">// 处理服务器消息（包括距离和电量）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">ws</span><span class="s2">.</span><span class="s11">onmessage</span><span class="s2"> = </span><span class="s5">function</span><span class="s2">(</span><span class="s4">event</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">message</span><span class="s2"> = </span><span class="s4">event</span><span class="s2">.</span><span class="s4">data</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`收到: </span><span class="s5">${</span><span class="s14">message</span><span class="s5">}</span><span class="s6">`</span><span class="s2">);</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s12">// 车辆连接状态</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">message</span><span class="s2"> === </span><span class="s6">"CAR_CONNECTED:1"</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s5">true</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s12">// 车辆数据（距离和电量）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s14">message</span><span class="s2">.</span><span class="s11">startsWith</span><span class="s2">(</span><span class="s6">"CAR_DATA:"</span><span class="s2">)) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">data</span><span class="s2"> = </span><span class="s14">message</span><span class="s2">.</span><span class="s11">replace</span><span class="s2">(</span><span class="s6">"CAR_DATA:"</span><span class="s2">, </span><span class="s6">""</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s12">// 解析距离（格式：DISTANCE:5.2）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">data</span><span class="s2">.</span><span class="s11">startsWith</span><span class="s2">(</span><span class="s6">"DISTANCE:"</span><span class="s2">)) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">distance</span><span class="s2"> = </span><span class="s11">parseFloat</span><span class="s2">(</span><span class="s14">data</span><span class="s2">.</span><span class="s11">split</span><span class="s2">(</span><span class="s6">":"</span><span class="s2">)[</span><span class="s9">1</span><span class="s2">]);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s13">if</span><span class="s2"> (!</span><span class="s11">isNaN</span><span class="s2">(</span><span class="s14">distance</span><span class="s2">)) </span><span class="s11">updateDistance</span><span class="s2">(</span><span class="s14">distance</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s12">// 解析电量（格式：BATTERY:85）</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s14">data</span><span class="s2">.</span><span class="s11">startsWith</span><span class="s2">(</span><span class="s6">"BATTERY:"</span><span class="s2">)) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">battery</span><span class="s2"> = </span><span class="s11">parseInt</span><span class="s2">(</span><span class="s14">data</span><span class="s2">.</span><span class="s11">split</span><span class="s2">(</span><span class="s6">":"</span><span class="s2">)[</span><span class="s9">1</span><span class="s2">]);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                            </span></span><span class="s13">if</span><span class="s2"> (!</span><span class="s11">isNaN</span><span class="s2">(</span><span class="s14">battery</span><span class="s2">) &amp;&amp; </span><span class="s14">battery</span><span class="s2"> &gt;= </span><span class="s9">0</span><span class="s2"> &amp;&amp; </span><span class="s14">battery</span><span class="s2"> &lt;= </span><span class="s9">100</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                                </span></span><span class="s11">updateBattery</span><span class="s2">(</span><span class="s14">battery</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                            </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s12">// 收到数据即视为车辆已连接</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s5">true</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s12">// 其他车辆消息</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">else</span><span class="s2"> </span><span class="s13">if</span><span class="s2"> (</span><span class="s14">message</span><span class="s2">.</span><span class="s11">startsWith</span><span class="s2">(</span><span class="s6">"CAR_MSG:"</span><span class="s2">)) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s5">true</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">ws</span><span class="s2">.</span><span class="s11">onclose</span><span class="s2"> = </span><span class="s5">function</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">isConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">updateServerStatus</span><span class="s2">(</span><span class="s5">false</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s5">false</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s12">// 重置距离和电量显示</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">distanceEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">"--"</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">"--"</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">batteryIconEl</span><span class="s2">.</span><span class="s4">className</span><span class="s2"> = </span><span class="s6">"fas fa-battery-full"</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">'服务器连接已关闭'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">ws</span><span class="s2">.</span><span class="s11">onerror</span><span class="s2"> = </span><span class="s5">function</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">'连接错误：请检查服务器'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>};</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">disconnect</span><span class="s2">() {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">ws</span><span class="s2">) </span><span class="s4">ws</span><span class="s2">.</span><span class="s11">close</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">isConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">carConnected</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s11">updateServerStatus</span><span class="s2">(</span><span class="s5">false</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s11">updateCarStatus</span><span class="s2">(</span><span class="s5">false</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">distanceEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">"--"</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">batteryEl</span><span class="s2">.</span><span class="s4">textContent</span><span class="s2"> = </span><span class="s6">"--"</span><span class="s2">;</span></p>
<p class="p2"><span class="s10"><span class="Apple-converted-space">                </span></span><span class="s14">batteryIconEl</span><span class="s10">.</span><span class="s4">className</span><span class="s10"> = </span><span class="s2">"fas fa-battery-full"</span><span class="s10">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 发送指令</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s5">function</span><span class="s2"> </span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s4">cmd</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (!</span><span class="s4">isConnected</span><span class="s2"> || !</span><span class="s4">ws</span><span class="s2"> || </span><span class="s4">ws</span><span class="s2">.</span><span class="s4">readyState</span><span class="s2"> !== </span><span class="s15">WebSocket</span><span class="s2">.</span><span class="s4">OPEN</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">'发送失败：未连接服务器'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">alert</span><span class="s2">(</span><span class="s6">'请先连接服务器'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">return</span><span class="s2"> </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> ([</span><span class="s6">'F'</span><span class="s2">,</span><span class="s6">'B'</span><span class="s2">,</span><span class="s6">'L'</span><span class="s2">,</span><span class="s6">'R'</span><span class="s2">,</span><span class="s6">'S'</span><span class="s2">].</span><span class="s11">indexOf</span><span class="s2">(</span><span class="s4">cmd</span><span class="s2">) === -</span><span class="s9">1</span><span class="s2"> &amp;&amp; </span><span class="s4">cmd</span><span class="s2"> === </span><span class="s4">lastSentCmd</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">return</span><span class="s2"> </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">try</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">ws</span><span class="s2">.</span><span class="s11">send</span><span class="s2">(</span><span class="s4">cmd</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">lastSentCmd</span><span class="s2"> = </span><span class="s4">cmd</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">updateLastCommand</span><span class="s2">(</span><span class="s4">cmd</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`发送: </span><span class="s5">${</span><span class="s4">cmd</span><span class="s5">}</span><span class="s6">`</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">return</span><span class="s2"> </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>} </span><span class="s13">catch</span><span class="s2"> (</span><span class="s4">e</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">`发送失败: </span><span class="s5">${</span><span class="s4">cmd</span><span class="s5">}</span><span class="s6">`</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">return</span><span class="s2"> </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 事件监听</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s14">joystick</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'mousedown'</span><span class="s2">, (</span><span class="s4">e</span><span class="s2">) </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">e</span><span class="s2">.</span><span class="s11">preventDefault</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s14">joystick</span><span class="s2">.</span><span class="s4">style</span><span class="s2">.</span><span class="s4">cursor</span><span class="s2"> = </span><span class="s6">'grabbing'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">document</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'mousemove'</span><span class="s2">, (</span><span class="s4">e</span><span class="s2">) </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) </span><span class="s11">handleJoystickMove</span><span class="s2">(</span><span class="s4">e</span><span class="s2">.</span><span class="s4">clientX</span><span class="s2">, </span><span class="s4">e</span><span class="s2">.</span><span class="s4">clientY</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">document</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'mouseup'</span><span class="s2">, () </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s14">joystick</span><span class="s2">.</span><span class="s4">style</span><span class="s2">.</span><span class="s4">cursor</span><span class="s2"> = </span><span class="s6">'grab'</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">resetJoystick</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s14">joystick</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'touchstart'</span><span class="s2">, (</span><span class="s4">e</span><span class="s2">) </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">e</span><span class="s2">.</span><span class="s11">preventDefault</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">true</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}, { </span><span class="s4">passive:</span><span class="s2"> </span><span class="s5">false</span><span class="s2"> });</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">document</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'touchmove'</span><span class="s2">, (</span><span class="s4">e</span><span class="s2">) </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">e</span><span class="s2">.</span><span class="s11">preventDefault</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">touch</span><span class="s2"> = </span><span class="s4">e</span><span class="s2">.</span><span class="s4">touches</span><span class="s2">[</span><span class="s9">0</span><span class="s2">];</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">handleJoystickMove</span><span class="s2">(</span><span class="s14">touch</span><span class="s2">.</span><span class="s4">clientX</span><span class="s2">, </span><span class="s14">touch</span><span class="s2">.</span><span class="s4">clientY</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>}, { </span><span class="s4">passive:</span><span class="s2"> </span><span class="s5">false</span><span class="s2"> });</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">document</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'touchend'</span><span class="s2">, () </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">resetJoystick</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s4">document</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'touchcancel'</span><span class="s2">, () </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s4">isDragging</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s4">isDragging</span><span class="s2"> = </span><span class="s5">false</span><span class="s2">;</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s11">resetJoystick</span><span class="s2">();</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p10"><span class="s10"><span class="Apple-converted-space">            </span></span><span class="s14">connectBtn</span><span class="s10">.</span><span class="s2">addEventListener</span><span class="s10">(</span><span class="s6">'click'</span><span class="s10">, () </span><span class="s5">=&gt;</span><span class="s10"> </span><span class="s4">isConnected</span><span class="s10"> ? </span><span class="s2">disconnect</span><span class="s10">() : </span><span class="s2">connect</span><span class="s10">());</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s14">gearBtns</span><span class="s2">.</span><span class="s11">forEach</span><span class="s2">(</span><span class="s4">btn</span><span class="s2"> </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">btn</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'click'</span><span class="s2">, () </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s5">const</span><span class="s2"> </span><span class="s14">gear</span><span class="s2"> = </span><span class="s11">parseInt</span><span class="s2">(</span><span class="s4">btn</span><span class="s2">.</span><span class="s4">dataset</span><span class="s2">.</span><span class="s4">gear</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s13">if</span><span class="s2"> (</span><span class="s14">gear</span><span class="s2"> !== </span><span class="s4">currentGear</span><span class="s2">) {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s14">gear</span><span class="s2">.</span><span class="s11">toString</span><span class="s2">()) &amp;&amp; (</span><span class="s4">currentGear</span><span class="s2"> = </span><span class="s14">gear</span><span class="s2">) &amp;&amp; </span><span class="s11">updateGearDisplay</span><span class="s2">(</span><span class="s14">gear</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                    </span>}</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span>});</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s14">baitBtns</span><span class="s2">.</span><span class="s11">forEach</span><span class="s2">(</span><span class="s4">btn</span><span class="s2"> </span><span class="s5">=&gt;</span><span class="s2"> {</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s4">btn</span><span class="s2">.</span><span class="s11">addEventListener</span><span class="s2">(</span><span class="s6">'click'</span><span class="s2">, () </span><span class="s5">=&gt;</span><span class="s2"> </span><span class="s11">sendCommand</span><span class="s2">(</span><span class="s4">btn</span><span class="s2">.</span><span class="s4">dataset</span><span class="s2">.</span><span class="s4">cmd</span><span class="s2">));</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span>});</span></p>
<p class="p6"><span class="s8"></span><br></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s12">// 初始化</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s11">addToHistory</span><span class="s2">(</span><span class="s6">'控制器已加载，等待连接'</span><span class="s2">);</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">        </span>});</span></p>
<p class="p1"><span class="s10"><span class="Apple-converted-space">    </span></span><span class="s1">&lt;/</span><span class="s2">script</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">body</span><span class="s1">&gt;</span></p>
<p class="p1"><span class="s1">&lt;/</span><span class="s2">html</span><span class="s1">&gt;</span></p>
</body>
</html>
